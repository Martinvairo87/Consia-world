<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CONSIA</title>
  <meta name="description" content="CONSIA ¬∑ Sistema activo" />
  <meta name="theme-color" content="#05070d" />
  <style>
    :root{
      --bg0:#020617;
      --bg1:#0b1220;
      --card:rgba(10,14,25,.72);
      --stroke:rgba(255,255,255,.10);
      --text:#e5e7eb;
      --muted:rgba(229,231,235,.72);
      --accent:#111827;
      --btn:#0b1220;
      --btn2:#0f172a;
      --glow:rgba(255,255,255,.08);
      --ring:rgba(255,255,255,.18);
    }
    *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Arial,sans-serif}
    body{
      margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
      background:
        radial-gradient(1200px 600px at 50% 25%, rgba(255,255,255,.06), transparent 55%),
        radial-gradient(900px 500px at 20% 70%, rgba(56,189,248,.10), transparent 60%),
        radial-gradient(900px 500px at 80% 70%, rgba(99,102,241,.10), transparent 60%),
        linear-gradient(180deg, var(--bg0), #000 110%);
      color:var(--text);
      padding:22px;
    }
    .wrap{width:min(980px,100%);display:grid;gap:18px;grid-template-columns:1.2fr .8fr}
    @media(max-width:920px){.wrap{grid-template-columns:1fr}}
    .card{
      border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
      backdrop-filter: blur(14px);
      border-radius:18px;
      padding:22px;
      box-shadow: 0 20px 70px rgba(0,0,0,.55);
    }
    .logo{
      width:48px;height:48px;border-radius:14px;display:grid;place-items:center;
      border:1px solid var(--stroke);
      background: radial-gradient(circle at 30% 20%, rgba(255,255,255,.10), transparent 55%),
                  linear-gradient(180deg, rgba(17,24,39,.88), rgba(2,6,23,.88));
      box-shadow: 0 10px 30px rgba(0,0,0,.45);
      margin-bottom:14px;
    }
    .logo span{font-weight:800;letter-spacing:.10em}
    h1{margin:0 0 8px;font-size:28px;letter-spacing:.04em}
    p{margin:0 0 14px;color:var(--muted);line-height:1.45}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      border:1px solid var(--stroke);
      padding:10px 12px;border-radius:999px;
      background:rgba(0,0,0,.22);
      color:var(--muted);
      font-size:13px;
    }
    .pill b{color:var(--text);font-weight:650}
    .btn{
      appearance:none;border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      color:var(--text);
      padding:14px 14px;border-radius:14px;
      font-weight:700;font-size:15px;
      display:inline-flex;gap:10px;align-items:center;justify-content:center;
      cursor:pointer;user-select:none;text-decoration:none;
      box-shadow: 0 12px 28px rgba(0,0,0,.35);
      transition: transform .08s ease, border-color .08s ease, box-shadow .08s ease;
      width: 100%;
    }
    .btn:active{transform:scale(.985)}
    .btn:hover{border-color:var(--ring); box-shadow: 0 16px 34px rgba(0,0,0,.45)}
    .btn.primary{
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
    }
    .mini{font-size:12px;color:var(--muted);margin-top:10px}
    .grid2{display:grid;gap:12px;grid-template-columns:1fr 1fr}
    @media(max-width:520px){.grid2{grid-template-columns:1fr}}
    select{
      width:100%;padding:12px 12px;border-radius:12px;
      border:1px solid var(--stroke);
      background:rgba(0,0,0,.28);
      color:var(--text);
      outline:none;
    }
    label{font-size:12px;color:var(--muted);display:block;margin:10px 0 6px}
    .right h3{margin:0 0 10px;font-size:14px;letter-spacing:.08em;color:rgba(229,231,235,.82)}
    .kpi{display:grid;gap:10px}
    .kpi div{border:1px solid var(--stroke);border-radius:14px;padding:12px;background:rgba(0,0,0,.20)}
    .kpi .t{font-size:12px;color:var(--muted)}
    .kpi .v{margin-top:6px;font-size:15px;font-weight:700}
    .sep{height:1px;background:rgba(255,255,255,.08);margin:12px 0}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="logo"><span>CS</span></div>
      <h1 id="title">CONSIA</h1>
      <p id="subtitle">Sistema activo ¬∑ Owner-Only ¬∑ Privacidad primero</p>

      <div class="row" style="margin-bottom:14px">
        <span class="pill">üåê <b id="pillLang">Idioma</b>: <span id="langNow">ES</span></span>
        <span class="pill">üéõÔ∏è <b id="pillTone">Tono</b>: <span id="toneNow">Sereno</span></span>
        <span class="pill">üõ∞Ô∏è <b>API</b>: <span id="apiNow">‚Äî</span></span>
      </div>

      <div class="grid2">
        <div>
          <label id="lblLang" for="locale">Idioma</label>
          <select id="locale">
            <option value="es">Espa√±ol</option>
            <option value="en">English</option>
            <option value="pt">Portugu√™s</option>
            <option value="fr">Fran√ßais</option>
            <option value="it">Italiano</option>
            <option value="de">Deutsch</option>
          </select>
        </div>
        <div>
          <label id="lblTone" for="tone">Tono</label>
          <select id="tone">
            <option value="sereno">Sereno</option>
            <option value="motivador">Motivador</option>
          </select>
        </div>
      </div>

      <div class="sep"></div>

      <a class="btn primary" id="btnOS" href="/core/index.html">‚ö´ Sistema operativo</a>
      <div class="mini" id="hint">Si el bot√≥n no abre, el problema es deploy/cache: forz√° recarga y prob√° con ?v=123</div>
    </div>

    <div class="card right">
      <h3 id="rightTitle">ESTADO</h3>
      <div class="kpi">
        <div><div class="t" id="k1t">Health</div><div class="v" id="k1v">‚Äî</div></div>
        <div><div class="t" id="k2t">Config</div><div class="v" id="k2v">‚Äî</div></div>
        <div><div class="t" id="k3t">CORS</div><div class="v" id="k3v">‚Äî</div></div>
      </div>
      <div class="sep"></div>
      <a class="btn" id="btnTest" href="#" onclick="return false;">üîÅ Test r√°pido</a>
      <div class="mini" id="mini2">Esto solo valida que el front ve a la API.</div>
    </div>
  </div>

<script>
(function(){
  const qs = new URLSearchParams(location.search);
  const store = (k,v)=>localStorage.setItem(k,v);
  const load = (k,d)=>localStorage.getItem(k)||d;

  const api = load("CONSIA_API","https://api.consia.world");
  document.getElementById("apiNow").textContent = api.replace(/^https?:\\/\\//,"");

  const localeSel = document.getElementById("locale");
  const toneSel = document.getElementById("tone");

  const guess = (navigator.language||"es").slice(0,2).toLowerCase();
  const initLocale = qs.get("lang") || load("CONSIA_LOCALE", (["es","en","pt","fr","it","de"].includes(guess)?guess:"es"));
  const initTone = qs.get("tone") || load("CONSIA_TONE","sereno");

  localeSel.value = initLocale;
  toneSel.value = initTone;
  document.getElementById("langNow").textContent = initLocale.toUpperCase();
  document.getElementById("toneNow").textContent = (initTone==="motivador"?"Motivador":"Sereno");

  localeSel.addEventListener("change", ()=>{
    store("CONSIA_LOCALE", localeSel.value);
    document.getElementById("langNow").textContent = localeSel.value.toUpperCase();
  });
  toneSel.addEventListener("change", ()=>{
    store("CONSIA_TONE", toneSel.value);
    document.getElementById("toneNow").textContent = (toneSel.value==="motivador"?"Motivador":"Sereno");
  });

  // add cache-busting to OS link
  const os = document.getElementById("btnOS");
  os.href = "/core/index.html?v=" + Date.now();

  async function ping(){
    try{
      const r = await fetch(api + "/api/health", {mode:"cors"});
      const j = await r.json();
      document.getElementById("k1v").textContent = j.ok ? "OK" : "FAIL";
      document.getElementById("k2v").textContent = j.version || "‚Äî";
      document.getElementById("k3v").textContent = r.headers.get("access-control-allow-origin") ? "OK" : "‚Äî";
    }catch(e){
      document.getElementById("k1v").textContent = "OFF";
      document.getElementById("k2v").textContent = "‚Äî";
      document.getElementById("k3v").textContent = "‚Äî";
    }
  }
  document.getElementById("btnTest").addEventListener("click", async ()=>{
    await ping();
    alert("Test OK (si Health=OK).");
  });
  ping();
})();
</script>
</body>
</html>
