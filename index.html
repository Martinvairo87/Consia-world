<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="theme-color" content="#000000" />
<title>CONSIA</title>

<style>
:root{
  --bg:#000;
  --line:rgba(255,255,255,.12);
  --txt:rgba(255,255,255,.92);
  --muted:rgba(255,255,255,.6);
  --ok:#6ef3c5;
  --warn:#ffd479;
  --bad:#ff7a7a;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;background:#000;color:var(--txt);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto}

.wrap{
  min-height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px;
}

.panel{
  width:min(960px,100%);
  border:1px solid var(--line);
  border-radius:28px;
  padding:28px;
  background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
  box-shadow:0 30px 80px rgba(0,0,0,.6);
}

.center{
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
}

.orb{
  width:min(260px,70vw);
  aspect-ratio:1/1;
  border-radius:50%;
  background:
    radial-gradient(60% 60% at 40% 35%, rgba(255,255,255,.18), transparent 60%),
    radial-gradient(70% 70% at 60% 60%, rgba(255,255,255,.08), transparent 65%);
  border:1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 0 40px rgba(0,0,0,.7), 0 0 90px rgba(255,255,255,.05);
}

h1{
  margin:18px 0 4px;
  font-weight:500;
  letter-spacing:.28em;
}

.subtitle{
  color:var(--muted);
  font-size:15px;
}

.modeLine{
  margin-top:14px;
  letter-spacing:.18em;
  font-size:13px;
  color:var(--muted);
}

.modePills{
  display:flex;
  gap:10px;
  margin:14px 0;
}

.mBtn{
  width:46px;height:46px;border-radius:50%;
  border:1px solid var(--line);
  background:rgba(255,255,255,.04);
  color:var(--txt);
  font-size:14px;
  cursor:pointer;
}

.actions{
  display:flex;
  gap:12px;
  margin-top:10px;
}

.btn{
  padding:14px 22px;
  border-radius:999px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.05);
  color:var(--txt);
  cursor:pointer;
}

.debug{
  margin-top:18px;
  border-top:1px solid var(--line);
  padding-top:14px;
  font-family:ui-monospace,Menlo,monospace;
  font-size:12px;
  color:var(--muted);
  white-space:pre-wrap;
}
</style>
</head>

<body>
<div class="wrap">
  <div class="panel">
    <div class="center">
      <div class="orb"></div>

      <h1>CONSIA</h1>
      <div class="subtitle">Estoy presente.</div>

      <div class="modeLine" id="modeLine">—</div>

      <div class="modePills">
        <button class="mBtn" onclick="setMode('A')">A</button>
        <button class="mBtn" onclick="setMode('B')">B</button>
        <button class="mBtn" onclick="setMode('C')">C</button>
      </div>

      <div class="actions">
        <button class="btn" onclick="wake()">WAKE</button>
        <button class="btn" onclick="presence()">PRESENCE</button>
        <button class="btn" onclick="session()">ACTIVE</button>
      </div>

      <div class="debug" id="debug">BOOTING…</div>
    </div>
  </div>
</div>

<script>
const dbg = (t)=>debug.textContent += "\n"+t;
const debug = document.getElementById("debug");
const modeLine = document.getElementById("modeLine");

async function api(path){
  try{
    const r = await fetch(path);
    const txt = await r.text();
    dbg(`> GET ${path} (${r.status})`);
    dbg(txt);
    try{ return JSON.parse(txt); }catch{ return null; }
  }catch(e){
    dbg("ERROR "+e.message);
  }
}

async function boot(){
  debug.textContent="CONSIA boot…";
  const m = await api("/api/mode?set=A");
  if(m?.mode) modeLine.textContent=`A · ACTIVE`;
}

async function setMode(m){
  const r = await api(`/api/mode?set=${m}`);
  if(r?.mode) modeLine.textContent=`${r.mode} · ACTIVE`;
}

async function wake(){ await api("/api/wake"); }
async function presence(){ await api("/api/presence"); }
async function session(){ await api("/api/session_start"); }

boot();
</script>
</body>
</html>
