<!-- CONSIA GLOBAL LANGUAGE SYSTEM -->
<script>
const userLang = navigator.language || navigator.userLanguage;

async function translatePage(targetLang) {

  const textNodes = [];
  const walker = document.createTreeWalker(
    document.body,
    NodeFilter.SHOW_TEXT,
    null,
    false
  );

  while (walker.nextNode()) {
    textNodes.push(walker.currentNode);
  }

  for (const node of textNodes) {
    if (node.nodeValue.trim().length > 3) {

      const res = await fetch("https://api.consia.world/translate", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          text: node.nodeValue,
          target: targetLang
        })
      });

      const data = await res.json();
      node.nodeValue = data.translation;
    }
  }
}

// Auto detect language
translatePage(userLang);
</script>
